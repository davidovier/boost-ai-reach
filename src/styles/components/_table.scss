// Enhanced table and card layouts for scans list
@use '../variables' as *;

.enhanced-table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  background: transparent;
  
  thead {
    th {
      background: $gradient-secondary;
      border-bottom: 1px solid hsl(var(--border));
      padding: 1rem;
      text-align: left;
      font-weight: 600;
      font-size: 0.875rem;
      color: hsl(var(--foreground));
      white-space: nowrap;
      
      &:first-child {
        border-radius: $radius 0 0 0;
      }
      
      &:last-child {
        border-radius: 0 $radius 0 0;
      }
    }
  }
  
  tbody {
    tr {
      background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--muted) / 0.3) 100%);
      border: 1px solid hsl(var(--border) / 0.5);
      border-bottom: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: 
          0 4px 6px -1px hsl(var(--foreground) / 0.08),
          0 10px 25px -5px hsl(var(--primary) / 0.1);
        border-color: hsl(var(--primary) / 0.3);
        background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--primary) / 0.02) 100%);
        
        .action-buttons {
          opacity: 1;
          transform: translateX(0);
        }
      }
      
      &:last-child {
        border-bottom: 1px solid hsl(var(--border) / 0.5);
        
        td {
          &:first-child {
            border-radius: 0 0 0 $radius;
          }
          
          &:last-child {
            border-radius: 0 0 $radius 0;
          }
        }
      }
      
      td {
        padding: 1rem;
        border-right: 1px solid hsl(var(--border) / 0.3);
        vertical-align: middle;
        
        &:last-child {
          border-right: none;
        }
        
        &.website-cell {
          .website-name {
            font-weight: 600;
            color: hsl(var(--foreground));
            margin-bottom: 0.25rem;
          }
          
          .website-url {
            font-size: 0.875rem;
            color: hsl(var(--muted-foreground));
          }
        }
        
        &.score-cell {
          .score-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
            font-weight: 600;
            font-size: 0.875rem;
            
            &.high {
              background: linear-gradient(135deg, hsl(142 76% 36% / 0.1), hsl(142 76% 36% / 0.2));
              color: hsl(142 76% 36%);
              border: 1px solid hsl(142 76% 36% / 0.3);
            }
            
            &.medium {
              background: linear-gradient(135deg, hsl(45 93% 47% / 0.1), hsl(45 93% 47% / 0.2));
              color: hsl(45 93% 47%);
              border: 1px solid hsl(45 93% 47% / 0.3);
            }
            
            &.low {
              background: linear-gradient(135deg, hsl(0 84% 60% / 0.1), hsl(0 84% 60% / 0.2));
              color: hsl(0 84% 60%);
              border: 1px solid hsl(0 84% 60% / 0.3);
            }
          }
        }
        
        &.issues-cell {
          .issues-count {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            
            .count-badge {
              background: hsl(var(--secondary));
              color: hsl(var(--secondary-foreground));
              padding: 0.25rem 0.5rem;
              border-radius: 0.375rem;
              font-size: 0.75rem;
              font-weight: 600;
            }
          }
        }
        
        &.actions-cell {
          width: 120px;
          
          .action-buttons {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            opacity: 0.7;
            transform: translateX(8px);
            transition: all 0.3s ease;
            
            .action-btn {
              display: flex;
              align-items: center;
              justify-content: center;
              width: 2rem;
              height: 2rem;
              border-radius: 0.375rem;
              border: 1px solid hsl(var(--border));
              background: hsl(var(--background));
              color: hsl(var(--muted-foreground));
              transition: all 0.2s ease;
              cursor: pointer;
              position: relative;
              
              &:hover {
                background: hsl(var(--primary));
                color: hsl(var(--primary-foreground));
                border-color: hsl(var(--primary));
                transform: scale(1.1);
              }
              
              svg {
                width: 1rem;
                height: 1rem;
              }
            }
          }
        }
      }
    }
  }
  
  // Mobile card layout
  @media (max-width: 768px) {
    display: none;
  }
}

.scans-cards {
  display: none;
  
  @media (max-width: 768px) {
    display: block;
    
    .scan-card {
      background: linear-gradient(135deg, hsl(var(--card)) 0%, hsl(var(--muted) / 0.3) 100%);
      border: 1px solid hsl(var(--border) / 0.5);
      border-radius: $radius;
      padding: 1.25rem;
      margin-bottom: 1rem;
      box-shadow: 0 1px 3px 0 hsl(var(--foreground) / 0.05);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      cursor: pointer;
      
      &:hover {
        transform: translateY(-2px);
        box-shadow: 
          0 4px 6px -1px hsl(var(--foreground) / 0.08),
          0 10px 25px -5px hsl(var(--primary) / 0.1);
        border-color: hsl(var(--primary) / 0.3);
      }
      
      .card-header {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        margin-bottom: 1rem;
        
        .website-info {
          flex: 1;
          
          .website-name {
            font-weight: 600;
            color: hsl(var(--foreground));
            margin-bottom: 0.25rem;
            font-size: 1.125rem;
          }
          
          .website-url {
            color: hsl(var(--muted-foreground));
            font-size: 0.875rem;
          }
        }
        
        .card-actions {
          display: flex;
          gap: 0.5rem;
          
          .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 0.5rem;
            border: 1px solid hsl(var(--border));
            background: hsl(var(--background));
            color: hsl(var(--muted-foreground));
            transition: all 0.2s ease;
            
            &:hover {
              background: hsl(var(--primary));
              color: hsl(var(--primary-foreground));
              border-color: hsl(var(--primary));
            }
            
            svg {
              width: 1.125rem;
              height: 1.125rem;
            }
          }
        }
      }
      
      .card-content {
        .metrics-grid {
          display: grid;
          grid-template-columns: 1fr 1fr;
          gap: 1rem;
          margin-bottom: 1rem;
          
          .metric {
            .metric-label {
              font-size: 0.75rem;
              color: hsl(var(--muted-foreground));
              margin-bottom: 0.25rem;
              text-transform: uppercase;
              letter-spacing: 0.025em;
              font-weight: 500;
            }
            
            .metric-value {
              font-weight: 600;
              color: hsl(var(--foreground));
            }
          }
        }
        
        .scan-date {
          font-size: 0.875rem;
          color: hsl(var(--muted-foreground));
          border-top: 1px solid hsl(var(--border) / 0.5);
          padding-top: 0.75rem;
        }
      }
    }
  }
}

// Tooltip styles
.tooltip {
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  margin-bottom: 0.5rem;
  padding: 0.375rem 0.75rem;
  background: hsl(var(--popover));
  color: hsl(var(--popover-foreground));
  border: 1px solid hsl(var(--border));
  border-radius: 0.375rem;
  font-size: 0.75rem;
  white-space: nowrap;
  box-shadow: 0 4px 6px -1px hsl(var(--foreground) / 0.1);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  z-index: 50;
  
  &::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 4px solid transparent;
    border-top-color: hsl(var(--border));
  }
  
  &.show {
    opacity: 1;
  }
}